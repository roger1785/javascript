<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Mocha Tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>

    <script src="https://unpkg.com/chai@4/chai.js"></script>
    <script src="https://unpkg.com/mocha/mocha.js"></script>

    <script class="mocha-init">
      mocha.setup("bdd");
      mocha.checkLeaks();

      const assert = chai.assert;
    </script>

    <script>
      // function sumar(a, b) {
      //   if (typeof a != "number" || typeof b != "number") {
      //     throw new Error("Valores inválidos");
      //   }
      //   return a + b;
      // }

      // function sumarArray(numbers) {
      //   // console.log(typeof numbers);
      //   if (typeof numbers != "object") {
      //     throw new Error("Se necesita un array");
      //   }

      //   // console.log(numbers?.length);
      //   let total = 0;

      //   for (let i = 0; i < numbers.length; i++) {
      //     total += numbers[i];
      //   }

      //   return total;
      // }

      // const user1 = {
      //   nombre: "Juan",
      //   edad: 30,
      // };

      // const user2 = {
      //   nombre: "Juan",
      //   edad: 30,
      // };

      // console.log(user1 == user2);

      // function crearUsuario(nombre) {
      //   return {
      //     nombre,
      //     admin: false,
      //   };
      // }

      // function obtenerSaldo() {
      //   return new Promise((resolve) => {
      //     setTimeout(() => {
      //       resolve(1500);
      //     }, 500);
      //   });
      // }

      // obtenerSaldo().then((saldo) => {
      //   console.log(saldo);
      // });

      // function validarEdad(edad) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       if (edad < 18) {
      //         reject("Menor de edad");
      //       } else {
      //         resolve("Acceso permitido");
      //       }
      //     }, 500);
      //   });
      // }

      // function calcularTotal(precio, cantidad) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       if (typeof precio !== "number" || typeof cantidad !== "number") {
      //         reject("Datos inválidos");
      //         return;
      //       }

      //       if (cantidad < 1) {
      //         reject("Cantidad inválida");
      //         return;
      //       }

      //       resolve(precio * cantidad);
      //     }, 500);
      //   });
      // }
    </script>

    <script>
      // == equal
      // === strictEqual

      // describe("Matemática", function () {
      //   it("sumar(2, 2) es 4", function () {
      //     assert.strictEqual(sumar(2, 2), 4);
      //   });

      //   it("sumar('2', 2) retorna un excepción", function () {
      //     assert.throws(function () {
      //       sumar("2", 2);
      //     });
      //   });

      //   it("sumar() retorna un excepción", function () {
      //     assert.throws(function () {
      //       sumar();
      //     });
      //   });
      // });

      // describe("Función sumarArray", function () {
      //   it("sumar todos los números", function () {
      //     assert.strictEqual(sumarArray([1, 2, 3]), 6);
      //   });

      //   it("sumar todos los números negativos", function () {
      //     assert.strictEqual(sumarArray([-1, -2, -3]), -6);
      //   });

      //   it("un array vacío", function () {
      //     assert.strictEqual(sumarArray([]), 0);
      //   });

      //   it("sin argumento espero una excepción", function () {
      //     assert.throws(function () {
      //       sumarArray();
      //     });
      //   });
      // });

      // describe("Función crearUsuario", function () {
      //   it("Comparar usuario", function () {
      //     const user = {
      //       nombre: "Juan",
      //       admin: false,
      //     };
      //     assert.deepEqual(crearUsuario("Juan"), user);
      //   });

      //   it("Comparar usuario", function () {
      //     const user = {
      //       nombre: "Juan",
      //       admin: false,
      //     };
      //     assert.notDeepEqual(crearUsuario("María"), user);
      //   });
      // });

      // describe("Promesa obtenerSaldo", function () {
      //   it("La función obtenerSaldo retorna 1500", function () {
      //     // assert.equal(obtenerSaldo(), 1500);
      //     return obtenerSaldo().then((saldo) => {
      //       assert.strictEqual(saldo, 1500);
      //     });
      //   });
      // });

      // Ejercicio

      // function sumar(a, b) {
      //   return new Promise((resolve) => {
      //     setTimeout(() => {
      //       resolve(a + b);
      //     }, 2000);
      //   });
      // }
      // sumar(3, 4).then((suma) => {
      //   console.log(suma);
      // });

      // describe("Promesa suma", function () {
      //   it(`La funcion retorna 7`, function () {
      //     //asset.equal(obtenerSaldo(), 1500);
      //     return sumar().then((suma) => {
      //       assert.strictEqual(suma, 7);
      //     });
      //   });
      // });

      // ---

      // function suma(num1, num2) {
      //   return new Promise((resolve) => {
      //     setTimeout(resolve(num1 + num2), 2000);
      //   });
      // }

      // describe("Sumar 2 numero", function () {
      //   it("3 + 2 = 5", function () {
      //     return suma(3, 2).then((response) => {
      //       assert.strictEqual(response, 5);
      //     });
      //   });
      // });

      // function resta(a, b) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       if (typeof a === "number" && typeof b === "number") {
      //         console.log("Resta realizada");
      //         resolve(a - b);
      //       }
      //     }, 500);
      //   });
      // }

      // // resta(10, 5).then((resta) => {
      // //   console.log(resta);
      // // });

      // describe("Promesa resta", function () {
      //   it(`La funcion retorna 5`, function () {
      //     return resta(7, 2).then((resta) => {
      //       assert.strictEqual(resta, 5);
      //     });
      //   });
      // });

      // ---

      // function sumar(num1, num2) {
      //   return new Promise(function (resolve, reject) {
      //     setTimeout(function () {
      //       resolve(num1 + num2);
      //     }, 2000);
      //   });
      // }

      // describe("Sumar 2 numeros", function () {
      //   it("3 + 2 = 5", function (done) {
      //     this.timeout(3000);
      //     sumar(3, 2).then(function (response) {
      //       assert.strictEqual(response, 5);
      //       done();
      //     });
      //   });

      //   it("-3 + -2 = -5", function (done) {
      //     this.timeout(3000);

      //     sumar(-3, -2).then(function (response) {
      //       assert.strictEqual(response, -5);
      //       done();
      //     });
      //   });
      // });

      // ---

      // function suma(num1, num2) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       resolve(num1 + num2);
      //     }, 2000);
      //   });
      // }

      // describe("Promesa de suma", function () {
      //   it("Las funcion retorna una suma", function () {
      //     this.timeout(3000);
      //     return suma(2, 6).then((response) => {
      //       assert.strictEqual(response, 8);
      //     });
      //   });
      // });
    </script>

    <script>
      // describe("Es menor o mayor de edad", function () {
      //   it("es mayor then", function () {
      //     return validarEdad(20).then((response) => {
      //       assert.equal(response, "Acceso permitido");
      //     });
      //   });

      //   it("es mayor await", async function () {
      //     const response = await validarEdad(20);
      //     assert.equal(response, "Acceso permitido");
      //   });

      //   it("es menor", function () {
      //     return validarEdad(15).catch((error) => {
      //       assert.equal(error, "Menor de edad");
      //     });
      //   });
      // });

      // describe("función calcularTotal", function () {
      //   it("datos validos", async function () {
      //     const total = await calcularTotal(100, 3);
      //     assert.strictEqual(total, 300);
      //   });

      //   it("precio no es un numero", async function () {
      //     try {
      //       const total = await calcularTotal("100", 3);
      //     } catch (error) {
      //       assert.strictEqual(error, "Datos inválidos");
      //     }
      //   });

      //   it("cantidad no es un numero", async function () {
      //     try {
      //       const total = await calcularTotal(100, "3");
      //     } catch (error) {
      //       assert.strictEqual(error, "Datos inválidos");
      //     }
      //   });

      //   it("Cantidad es negativa", async function () {
      //     try {
      //       const total = await calcularTotal(100, -2);
      //     } catch (error) {
      //       assert.strictEqual(error, "Cantidad inválida");
      //     }
      //   });

      //   it("Cantidad es 0", async function () {
      //     try {
      //       const total = await calcularTotal(100, 0);
      //     } catch (error) {
      //       assert.strictEqual(error, "Cantidad inválida");
      //     }
      //   });
      // });
    </script>

    <script>
      // function contarPares(numeros) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       const pares = numeros.filter((num) => num % 2 === 0);
      //       if (pares.length > 0) {
      //         console.log("Pares contados");
      //         resolve(pares.length);
      //       } else {
      //         reject("No se encontraron números pares");
      //       }
      //     }, 500);
      //   });
      // }

      // function contarPares(numeros) {
      //   let contador = 0;

      //   for (let i = 0; i < numeros.length; i++) {
      //     if (numeros[i] % 2 === 0) {
      //       contador++;
      //     }
      //   }

      //   return contador;
      // }

      // function contarPares(arr) {
      //   let contador = 0;

      //   for (let i = 0; i < arr.length; i++) {
      //     if (arr[i] % 2 === 0) {
      //       contador++;
      //     }
      //   }

      //   return contador;
      // }

      function contarPares(numbers) {
        return numbers.filter((num) => num % 2 === 0).length;
      }

      // function contarPares(pares) {
      //   return new Promise((resolve, reject) => {
      //     let contar = 0;
      //     setTimeout(() => {
      //       // const pares = [num1, num2, num3, num4];
      //       for (let i = 0; i < pares.length; i++) {
      //         if (pares[i] % 2 == 0) {
      //           contar++;
      //         }
      //       }

      //       resolve(contar);
      //     }, 500);
      //   });
      // }

      describe("contarPares", function () {
        it("cuenta correctamente los pares", function () {
          assert.strictEqual(contarPares([1, 2, 3, 4]), 2);
        });

        it("devuelve 0 si no hay pares", function () {
          assert.strictEqual(contarPares([1, 3, 5]), 0);
        });

        it("devuelve 0 con array vacío", function () {
          assert.strictEqual(contarPares([]), 0);
        });
      });
    </script>

    <script class="mocha-exec">
      mocha.run();
    </script>
  </body>
</html>
